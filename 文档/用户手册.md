# 游戏开发社团网站用户手册

## 网站简介
哈尔滨工业大学游戏开发社团网站（以下简称本网站）是一款用于哈尔滨工业大学游戏开发社团成员分享DEMO的用户可交互式网站（Web2.0应用），于2022年秋季学期开始开发。网站项目以MIT协议开源到Github上，代码仓库地址是https://github.com/abc2513/HITGameWeb/tree/main

## 手册简介
网站用户分成不同用户组控制操作权限，因此本手册以用户操作所需权限分组进行介绍，高等级权限可进行低等级权限的所有操作。本文最后更新于2022/12/25，相关说明可能出现过期的情况
### 更新记录
v0.1 2022/12/9 创建本文档
v0.2 2022/12/25 添加对新增功能的说明

## 用户操作引导
补充说明：用户身份组发生变更后，请重新登录以获得更新权限后的内容

### 游客（level=0）
用户组说明：进入网站自动获得该身份组
#### 访问网站
首先你需要连接校园网，在校园网环境内使用浏览器访问网址https://hitindie.top。这里建议使用电脑非IE浏览器以获得最佳使用体验。
#### 熟悉页面
网页顶部始终有导航栏，你可以点击导航元素跳转到新的页面。如果你想保留当前页面，可以右键导航元素并选择“新建标签页打开网址”
#### 查看DEMO
点击导航栏“DEMO”进入DEMO导航页面，在页面底即可看到已经公开的DEMO列表，点击列表元素即可进入对应的DEMO查看

#### 查看DEMO的日浏览量曲线

点击DEMO查看页面顶部的“阅读量统计图表”即可进入页面

#### 查看指定网页的日访问量曲线

点击主页的“今天已有xx人xx次访问了网站首页”右侧的“更多”，即可进入页面

#### 注册
点击导航栏右侧“注册”进入注册页面，输入用户名、邮箱、密码、重复密码，阅读并同意用户协议，点击注册按钮即可注册新用户。注册成功后，你会得到你的用户ID作为识别账号的依据，并自动跳转到登录页面。
#### 登录
注册成功后会自动跳转到登录页面，后面再次需要登录时点击导航栏右侧的“登录”即可进入登录页面。你可以选择用户ID、邮箱、用户名其中之一，并选择密码进行登录。登录后会自动跳转到首页。
说明：同一设备同一浏览器的所有标签页共有同一登录状态，不同浏览器拥有不同的登录状态。

### 用户（level=1）
用户组说明：用户自行注册和登录后，即可自动获得该身份。
注意！测试期间，用户自动拥有正式成员的所有权限。

#### 用户中心

登录后顶部菜单栏右侧会显示“用户中心”，点击进入用户中心。在用户中心可以看到一系列功能列表。

#### 评论

在DEMO文章页面底部可以看到评论模块，输入评论内容并点击“发表评论”即可进行评论。你对每一篇文章发表的评论不能超过3条。

#### 删除评论

在DEMO文章页面主体内容后可以看到评论列表，在自己的评论右侧有“删除”按钮，点击该按钮即可删除该条评论。删除的评论不再被网站所记录，也不占用评论数。

#### 点赞/取消点赞

在DEMO文章页面主体内容后可以看到评论列表，评论列表顶部有“点赞”/“取消点赞”按钮，点击即可点赞/取消点赞

#### 账号管理
点击菜单栏右侧“账号管理”进入账号管理页面，可以看到账号的相关信息，并进行账号相关的操作。
##### 修改个人信息
在账号管理页面修改输入框内信息并点击提交按钮。
##### 修改密码
在账号管理页面输入旧密码和新密码，并重复新密码，点击提交按钮。
##### 退出登录
在账号管理页面底部点击“退出登录”按钮即可退出登录状态。

#### 管理我的DEMO文章

##### 创建DEMO

说明：该功能用于分享已经完成的DEMO。一个用户一个月内可发布5篇DEMO文章
在DEMO导航页面点击“我的DEMO”进入我的DEMO页面，点击“创建DEMO”即可进入创建DEMO页面。创建DEMO阶段只需要输入标题、参与者、简介，提交后可进入编辑DEMO页面添加更多内容。

##### 编辑DEMO

编辑demo用于修改已有的demo展示内容。编辑demo页面会比创建demo拥有更加丰富的功能，你可以在这里构建多彩的demo展示页面。

###### 进入编辑页面

在创建DEMO后，页面会自动跳转到编辑页面。当你想要再次进入时，你可以在我的Demo页面点击对应demo后的“编辑”进入编辑页面

###### 添加内容

可以在页面底部工具栏点击“添加段落”在所有内容之后添加，或者点击任意元素编辑框内的“添加段落”在对应内容之后进行插入。添加内容后可以选择类型及输入内容。现在已经支持输入：不同大小的标题、文字段落、空白行、图片外链（可按固定格式显示图片）、B站视频BV号（可按固定格式内嵌视频播放器）、链接、空白行

###### 编辑内容

在每一元素的编辑框内，你可以修改元素种类、内容、位置

###### 工具栏（旧）

页面底部有编辑工具栏，可进行相关编辑操作，并显示各种编辑操作的日志（该功能在未来可能移除）

###### 保存

在编辑页面底部你可以看到保存功能。选择存为草稿，你的文章将不会公开，只有在查看我的demo页面对自己可见。选择直接发表，你的文章将对所有用户可见。
请您注意保存自己的操作，以免数据丢失。

###### 技巧：向文章中插入图片

向文章中添加图片，需要将图片先上传到网络（通常使用图床，点击导航栏的“smms图床”可以看到我们推荐的图床）。将获得的图片地址粘贴到编辑框内，根据实际需要选择“长图片”/“宽图片”/“小图片”的元素种类，即可在文章中插入图片。注意，图片会自动靠右显示在网页中，如果有多张图片同时出现，会按照从右到左的顺序排布。如果左侧其他内容较少导致期望显示在两行的图片不能显示在两行，请在两图片中间插入一些“空白行”元素解决

###### 技巧：向文章中插入视频

向文章中添加视频，需要将视频上传到Bilbili网站。在视频的网址中你可以看到BVxxxxx这样的部分，称为BV号。将视频的BV号（包括字母BV）粘贴到编辑框内，选择“BV号”的元素种类，即可在文章中插入视频。

###### 技巧：预览编辑

新建第二个标签页用于查看自己的demo。在编辑DEMO页面保存内容后，刷新查看DEMO页面即可查看更改。

##### 查看自己的demo（包括草稿）

在我的demo页面，可以查看自己的demo列表。点击demo的标题即可强制查看demo（包括草稿）。点击标题后的预览可查看公开文章（这一操作与在demo导航页面点击demo进行查看是等价的）

#### 管理我的项目招人文章

该功能的相关架构与DEMO一致，请参照demo功能的使用引导。一个用户一个月内可发布2篇项目招人文章

#### 管理我的WebGL

WebGL是可运行在浏览器上的图形库，将demo打包成运行在WebGL上的内容，可在网页上运行游戏。本网站提供WebGL内容的上传和在线运行功能。建议查看视频教程：（撸了这么多代码和文档，可不可以要两个硬币qwq）

p1：WebGL简介https://www.bilibili.com/video/BV1HG4y1X7qQ/

p2：Unity游戏打包成WebGL内容https://www.bilibili.com/video/BV1WY411R7Xz

p3（可不看）：WebGL内容上传到GitHub网站https://www.bilibili.com/video/BV1cd4y1573i

p4：WebGL内容打包上传到社团网站https://www.bilibili.com/video/BV1QK411k7Nb

##### tip：打包WebGL

这一步需要在你的游戏开发环境中进行，你需要将打包后的内容直接压缩（！！注意！！不要压缩文件夹，是选中几个文件进行压缩！！！！）压缩后可改名，压缩包文件名不能拥有中文字符。

##### 上传WebGL

在顶部菜单或用户中心找到“上传WebGL”的按钮，点击进入上传页面。点击“浏览”按钮，选中你的压缩包，点击“提交”即可。

##### 删除WebGL

在我的WebGL列表里可以找到对应内容，点击右侧删除按钮即可删除

### 正式成员（level=2）
社团成员提供学号和姓名实名，经过管理员录入后成为正式成员。

目前该用户组可用功能和level1相同，但是只有实名的正式成员才能被提升为管理员。

### 管理员（level=3）
用户组说明：通过对用户、文章进行管理以维护网站秩序，管理操作将会被记录数据库中以备查阅。
level4用户可将正式成员lv2提升为管理员lv3。提升后需要重新登陆生效。

#### 管理用户
##### 进入管理用户页面
成为管理员后，在个人中心可看到“管理空间”列表。点击“管理用户”即可进入
##### 熟悉管理用户页面
1、搜索栏：可选择性地输入搜索限制条件进行用户的搜索，或者点击显示所有用户
2、搜索结果：在搜索栏进行搜索操作后，显示搜索到的用户列表。点击选择按钮即可选中该用户
3、选中用户后，在用户列表下显示用户相关信息和操作选项。管理员只能对权限等级低于自己的用户进行操作
##### 正式成员认证
选择一名lv1用户后，可输入学号、姓名为其实名并提升到lv2用户组
##### 实名信息维护
选择一名lv2+用户后，可为其维护（有误的）学号、姓名信息
##### 账号状态修改
（用户状态目前无实际效果）选择一名用户后，可以设置其账号状态

#### 管理公告
尽管公告与demo具有相同架构，但是值得注意的是其他管理员也具有修改公告的权限。管理员可以发布公告（没有数量限制），修改任意公告。

##### 创建公告

点击“用户中心”页面的“创建公告”即可进入页面

##### 修改公告

点击“用户中心”页面的“管理公告”即可进入管理公告页面，点击公告右侧的“编辑即可进行编辑

#### 管理文章

##### 修改文章的可见性

在DEMO文章页面主体内容后有评论列表，评论列表顶部可以看到“设置文章不可见”按钮，即可将文章改为”草稿“状态。

##### 修改文章的评分

在DEMO文章页面主体内容后有评论列表，评论列表顶部的“设置文章评分”相应内容，在输入框内修改评分并点击按钮即可进行修改。

##### 删除评论

在DEMO文章页面主体内容后有评论列表，评论右侧有红色的“管理员删除”按钮，点击即可删除评论。以此种方式删除的评论其实并没有删除，只是对用户不可见，依然记录在数据库中，但是不占用户发表评论数。

##### 修改主页展示内容

点击用户中心页面的“主页展示管理”，输入文章id并点击空白处可预览图片，点击“保存”按钮进行保存

#### 查看管理日志

在“用户中心”页面点击“管理日志”即可进入页面。输入搜索条件并点击“查询”即可进行查询，点击查询结果列表右侧的选择按钮即可选中该日志，并在页面底部查看该日志的全部信息。

### 组织者（level=4）
用户组说明：同一时间只存在一位level4用户，通常由社长担任，负责管理员的任免。
#### 管理员的任免
level4用户可通过转让的方式，将身份组转移给level3用户，同时自身成为level3用户。
在管理用户页面选择level2或level3用户后，level4用户可以在操作选项底部看到管理员任免选项。

#### lv4身份组转让
该操作通常只会在换届时使用，用于level4身份组的转移。
在个人中心-管理空间，level4用户可以看到“权限交接”，点击进入权限交接页面。为了确保安全，需要在该页面输入一系列相关信息来验证身份。

## 部署和维护引导
### 准备
#### 1、运行环境
服务端使用nodeJS框架搭建，并调用了一些第三方npm包，请安装node环境并全局安装npm包管理器
#### 2、数据库
服务器使用MySQL数据库保存数据，请安装MySQL并配置运行，数据库账号密码、端口信息请提供给“GameWeb/db/index.js”文件。另外，数据表需要迁移到数据库内
#### 3、SSL证书
SSL证书存放在“GameWeb/zs/”路径下，如有文件名或地址改动请到“GameWeb/server.js”文件内修改
#### 4、端口
网站端口有改动需求的可到“GameWeb/server.js”文件内修改
#### 5、域名
在命令行工具内输入ipconfig查看ipv4地址，并提供给域名解析服务，使得域名指向本机地址
### 运行
#### 启动
点击“启动服务器.bat”或者在GameWeb目录内执行命令语句node server.js即可运行网站服务器。如果运行成功，命令行窗口内会出现“服务器在端口xxx上运行成功”语句；如果出现“node不是可执行程序或命令”语句，请检查node环境的安装配置
#### 验证
在本机浏览器地址栏输入127.0.0.1即可查看在本机上运行的web服务

#### 常见问题

Q：明明部署好了，访问正确路径却出现404；A：请检查服务器是否同时运行了其他网络服务，如果是的话请在访问地址上加入端口号

### 维护
#### 关于证书
SSL证书未配置自动更新，若访问网页时出现“证书过期”的相关安全提醒，请进行手动更新SSL证书。
当然让客户浏览器忽略该安全提醒并继续，不证书过期的情况下也是可以正常使用网站的。
#### 关于域名
重新接入网络（包括重新启动计算机）会导致校园网分配的地址发生变动。发生这种情况后，需要在域名解析服务修改解析地址，以将域名重新指向本机。
#### 关于校园网外访问
如果没有公网IP，web服务只能在局域网内访问（校园网就是一个局域网）。顺带一提，哈工大官方提供的VPN服务只能访问白名单内的应用（本网站并不在此列）。可以考虑以下操作：
1、将本网站部署到具有公网IP的计算机上（但是迁移是件麻烦事，而且会产生相应的设备租用成本）
2、在本机上运行内网穿透工具（推荐）

## 开发者内容
想了解项目更多内容，包括项目文件组成、工作原理、整体架构、用例展示等内容，可以查看“GameWeb/文档/”路径下的相关内容
### 所需知识
前端：HTML5、CSS、JavaScript、AJAX、Vue2.0
后端：JavaScript、NodeJS
数据库：MySQL

### 一点感悟心得
1. 后端对前端发送的任何内容保持怀疑态度，进行验证和检查
2. 将项目系统化，进行合理的架构，使其具有良好的可读性、易拓展性、易维护性
3. 对于反复使用的代码内容，可进行封装以提高复用性。比如前端发送送请求的部分可以封装起来调用
4. 软件工程的前期工作很重要，“编程开始得越早，效率就越低”。前期工作建立在具备相应知识的前提上。
